{% extends 'base.html' %}
{% load static %}

{% block title %}
  {{ team }}
{% endblock %}

{% block content%}
<div class="container col-5 py-2">
  {% for team in team_info %}
    <h1> 
      <a href="{% url 'rating:history_team' team.name %}">
        {{ team.current_name }} 
      </a>
    </h1> 
    <h4>
    {{ team.name.city}}
    </h4>
  {% endfor %}
  
    <h4>
        Cезон:
        <a class="text-decoration-none text-reset" href="{% url 'rating:create_table' season %}">
          {{ season }}
        </a>
      </h4>
    <a class="btn btn-outline-secondary" href="{% url 'rating:team_players_in_season' team previous_season %}" role="button">
      Previous season
    </a>
    <a class="btn btn-outline-secondary" href="{% url 'rating:team_players_in_season' team next_season %}" role="button">
      Next season
    </a>
</div>
  
  <div class="container col-5">
    <table class="table table-striped table-bordered table-hover table-sm tcont countLines table_sort">
      <thead>
        <tr>
          <h4>Scoring Regular Season</h4>
        </tr>
        <tr>
          <th>#</th>
          <th data-type="string">Name</th>
          <th data-type="number">Age</th>
          <th data-type="number">Game</th>
          <th data-type="number">Goal</th>
          <th data-type="number">Assist</th>
          <th data-type="number">Point</th>
          <th data-type="number">Penalty</th>
        </tr>
      </thead>
      <tbody>
        {% for post in page_obj %}
          {% include 'includes/team_players_in_season_inc.html' %}
        {% endfor %}
      </tbody>
    </table>

    <!-- если пользователь не зарегистрирован то добавить статистику по игроку нельзя -->
    {% if request.user.is_authenticated %}
      <a class="btn btn-outline-secondary" href="{% url 'rating:create_statistic' team season %}" role="button">
        Add Player
      </a> 
    {% endif %}

    <script src="/static/css/main.js">
    </script> 

  </div>
  
  <div class="container col-5 py-2">
    <table class="table table-striped table-bordered table-hover table-sm tcont countLines">
      <thead>
        <tr>
          <h4>Goalies Regular Season</h4>
        </tr>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Age</th>
        <th>Game</th>
        <th>Goal</th>
        <th>Penalty</th>
      </tr>
      </thead>
    <tbody>
    {% for goalkeeper in goalkeepers %}
    <tr>
      <td>.</td>
      <td class="first">
        <a class="text-decoration-none text-reset" href="{% url 'rating:goalkeeper_detail' goalkeeper.name.id %}"> 
          {{ goalkeeper.name.name }}
        </a>
      </td>
      <td>{{ goalkeeper.age }}</td>
      <td>{{ goalkeeper.game }}</td>
      <td>{{ goalkeeper.goal_against }}</td>
      <td>{{ goalkeeper.penalty }}</td>
    </tr>
    {% endfor %}
    </tbody>
    </table>
    <!-- если пользователь не зарегистрирован то добавить статистику по игроку нельзя -->
    {% if request.user.is_authenticated %}
      <a class="btn btn-outline-secondary" href="{% url 'rating:create_goalkeeper_statistic' team season %}" role="button">
        Add Goalkeeper
      </a>
    {% endif %}     
  </div> 
{% endblock %}
